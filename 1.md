Perfect â€” since you are already **inside your virtual environment** here:

```
(.venv) PS D:\Research\Code\MQTT V2>
```

I will now give you the **NEW, CLEAN, STABLE command sequence** tailored for this exact location.

You will open **4 terminals**, but the commands below assume each terminal starts from:

```
(.venv) PS D:\Research\Code\MQTT V2>
```

Everything will work **exactly**, no path issues, no batch-file quirks.

---

# âœ… **TERMINAL 1 â€” START MOSQUITTO BROKER**

From your venv terminal:

```powershell
mosquitto -c C:\mosquitto_data\mosquitto.conf -v
```

Expected:

```
mosquitto version X running
Opening ipv4 listen socket on port 1883
```

âž¡ Leave this running forever.

---

# âœ… **TERMINAL 2 â€” START PACKET CAPTURE (TSHARK)**

Open a NEW terminal
Activate venv (only once per new terminal):

```powershell
D:\Research\Code\MQTT V2\.venv\Scripts\activate
```

Then run:

```powershell
tshark -i Wi-Fi -w "D:\Research\Code\MQTT V2\pcap_files\capture.pcap" -b duration:5
```

TShark will now generate rolling PCAPs.

âž¡ Leave this running.

---

# âœ… **TERMINAL 3 â€” START LIVE IDS**

Open a NEW terminal
Activate venv:

```powershell
D:\Research\Code\MQTT V2\.venv\Scripts\activate
```

Then run the IDS:

```powershell
python live_ids.py `
    --pcap-dir "D:\Research\Code\MQTT V2\pcap_files" `
    --model "D:\Research\Code\MQTT V2\model_outputs\biflow\random_forest\random_forest\model_rf.joblib" `
    --meta  "D:\Research\Code\MQTT V2\model_outputs\biflow\random_forest\train_metadata.json" `
    --out-log "D:\Research\Code\MQTT V2\ids_alerts.log"
```

Expected output:

```
Loaded model: ...
Monitoring PCAP dir...
Processing new pcap: capture_....
```

âž¡ Leave this window running.

---

# âœ… **TERMINAL 4 â€” START LIVE DASHBOARD**

Open a NEW terminal
Activate venv:

```powershell
D:\Research\Code\MQTT V2\.venv\Scripts\activate
```

Run dashboard:

```powershell
python live_ids_dashboard.py
```

You get:

* Attack counters
* Latest alert
* Real-time updates

âž¡ Leave this running.

---

# ðŸŸ¦ **CLIENT LAPTOPS (SEPARATE MACHINES)**

### ðŸ“Œ Client Laptop #1 â€” Publisher

In its own terminal:

```powershell
run_publisher.bat
```

### ðŸ“Œ Client Laptop #2 â€” Subscriber

```powershell
run_subscriber.bat
```

---

# ðŸŸ¥ **ATTACK LAPTOP**

On the attacker machine:

```powershell
run_full_attacks.bat
```

Select:

```
1 â†’ run attacks once
2 â†’ run 25-cycle loop
```

---

# ðŸŽ¯ **SUMMARY OF THE ONLY COMMANDS YOU NEED (BROKER LAPTOP)**

### âœ” Terminal 1 (Mosquitto)

```
mosquitto -c C:\mosquitto_data\mosquitto.conf -v
```

### âœ” Terminal 2 (TShark)

```
tshark -i Wi-Fi -w "D:\Research\Code\MQTT V2\pcap_files\capture.pcap" -b duration:5
```

### âœ” Terminal 3 (Live IDS)

```
python live_ids.py --pcap-dir "D:\Research\Code\MQTT V2\pcap_files" --model "D:\Research\Code\MQTT V2\model_outputs\biflow\random_forest\random_forest\model_rf.joblib" --meta "D:\Research\Code\MQTT V2\model_outputs\biflow\random_forest\train_metadata.json" --out-log "D:\Research\Code\MQTT V2\ids_alerts.log"
```

### âœ” Terminal 4 (Dashboard)

```
python live_ids_dashboard.py
```

---

If you want, I can bundle these 4 commands into a **simple text file** you can print for the lab.

Or I can generate a **PowerShell version** that opens 4 windows automatically (more stable than `.bat`).

Tell me if you want that!
